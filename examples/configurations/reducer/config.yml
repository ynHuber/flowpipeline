---
###############################################################################
# Consume flow messages from a pre-existing Kafka cluster containing
# protobuf-encoded flows in a topic. This topic can be generated by another
# pipeline, or by goflow itself.
- segment: kafkaconsumer
  config:
    server: kafka01.example.com:9093
    topic: flow-messages-enriched
    group: reducer-group-1
    user: reducer
    pass: $KAFKA_SASL_PASS

###############################################################################
# Drop any fields but the specified ones. This example creates a flow stream
# for demo purposes and for checking out the system with default or no
# credentials
- segment: dropfields
  config:
    policy: keep
    fields: Bytes,Proto

###############################################################################
# Produce flow messages back to a Kafka topic. This can be a different one than
# above.
- segment: kafkaproducer
  config:
    server: kafka01.example.com:9093
    topic: flow-messages-anon
    user: reducer
    pass: $KAFKA_SASL_PASS

